@using InventorySystem.ViewModels
@model InventorySystem.ViewModels.StockMoveVm
@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer

@{
    ViewData["Title"] = Localizer["PageTitle"]; // i18n başlık
}

<div class="container py-4 move-page">
    <h2 class="move-title mb-3">@Localizer["Header"]</h2>

    <!-- 🔹 Barkod Okuma / Lookup (scanner.js ile) -->
    <form id="scanForm" class="mb-3" autocomplete="off">
        @Html.AntiForgeryToken()
        <div class="input-group input-group-lg">
            <input id="barcodeInput" class="form-control"
                   placeholder="@Localizer["BarcodePlaceholder"]" autocomplete="off" autofocus />
            <button class="btn btn-forvia-accent" type="submit">Lookup</button>
        </div>
        <small class="move-help">@Localizer["LookupHelp"]</small>
    </form>

    <!-- 🔹 Lookup Sonucu -->
    <!-- ... (panel aynı, yalnızca sabit yazılar varsa Localizer ile) ... -->

    <div class="card move-card border-0">
        <div class="card-header text-white" style="background: var(--forvia-blue-grad);">
            @Localizer["ConfirmTransaction"]
        </div>
        <div class="card-body">
            <form asp-action="Confirm" asp-controller="Stock" method="post" novalidate class="row g-3" id="confirmForm">
                @Html.AntiForgeryToken()
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                <!-- Barkod -->
                <div class="col-12 col-md-6">
                    <label asp-for="Barcode" class="form-label"></label>
                    <input asp-for="Barcode" class="form-control" id="moveBarcode"
                           placeholder="@Localizer["BarcodePlaceholder"]" />
                    <span asp-validation-for="Barcode" class="text-danger small"></span>
                </div>

                <!-- Location (required) -->
                <div class="col-12 col-md-6">
                    <label class="form-label">@Localizer["LocationLabel"]</label>
                    <select asp-for="Location" class="form-select" id="moveLocation"
                            asp-items="Html.GetEnumSelectList<MoveLocation>()">
                        <option value="" disabled selected hidden>@Localizer["LocationPlaceholder"]</option>
                    </select>
                    <span class="text-muted d-block mt-1 small">@Localizer["LocationHelp"]</span>
                    <span asp-validation-for="Location" class="text-danger small"></span>
                </div>

                <!-- DeliveredBy (optional) -->
                <div class="col-12 col-md-6">
                    <label class="form-label">@Localizer["DeliveredByLabel"]</label>
                    <input asp-for="DeliveredBy" class="form-control"
                           placeholder="@Localizer["DeliveredByLabel"]" />
                    <span asp-validation-for="DeliveredBy" class="text-danger small"></span>
                </div>

                <!-- Note (optional) -->
                <div class="col-12">
                    <label class="form-label">@Localizer["NoteLabel"]</label>
                    <textarea asp-for="Note" class="form-control" rows="2"
                              placeholder="@Localizer["NoteLabel"]"></textarea>
                    <span asp-validation-for="Note" class="text-danger small"></span>
                </div>

                <div class="col-12 d-flex gap-2">
                    <button type="submit" class="btn btn-forvia-primary">
                        @Localizer["ConfirmTransaction"]
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Gizli form aynı kalabilir -->
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/js/scanner.js" asp-append-version="true"></script>
}
